<!doctype html>
<html>
<head>

<!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61484468-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-61484468-1');
    </script>


    <title>Alif Laam - Arabic Literacy - read and write in Arabic</title>
      <meta charset="UTF-8">
      <meta charset="utf-8" />
      <meta name="description" content="Alif Laam - Arabic Literacy Game - part of ALIF apps:  Arabic Learning is Fun - A web-based suite of apps to teach the foundation of Arabic reading, writing and listening. It teaches the names, shapes and sounds of the letters of the Arabic alphabet, in addition to the diacrticts (tashkeel/harakaat) and how to use Arabic keyboard and write letters and words and know the pronunciation of letters and words">
      <meta name="keywords" content="Arabic alphabet letters reading writing listening games online web mobile androin ios fun app pronunciation diacritics tashkeel harakaat pronunciation">
    
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Welcome to ZIM at http://zimjs.com - Code Interactive Media Pizzazz!             -->
<!-- ZIM runs on the HTML Canvas powered by JavaScript and CreateJS http://createjs.com -->
<!-- Founded by Inventor Dan Zen - http://danzen.com - Canadian New Media Award Winner     -->
<!-- ZIM is free to use. You can donate to help improve ZIM at http://zimjs.com/donate     -->

<!-- <script src="https://zimjs.org/cdn/1.3.2/createjs.js"></script>
<script src="https://zimjs.org/cdn/cat/00/zim.js"></script> -->

<style type="text/css">
.selected{
	background-color: green;
}
</style>

<script src="js/createjs.js"></script>
<script src="js/zim.js"></script>

<!--<script src="https://d309knd7es5f10.cloudfront.net/zim_10.3.0.js"></script>    -->
    
<!-- use zimjs.com/distill for minified individual functions! -->
<!--<script src="https://zimjs.org/cdn/pizzazz_03.js"></script>-->
<!-- <script src="https://zimjs.org/cdn/pizzazz_02.js"></script>     -->
<script src="js/pizzazz_02.js"></script>    
<!-- <script src="js/jquery.min.js"></script> -->
<script src="pages/tutorial.js"></script>
<script src="pages/zgame.js"></script>
<script src="pages/zwrite.js"></script>  
<script src="pages/profile_page.js"></script>  

    
<script src="pages/alphabet.js"></script>
<script src="pages/tutorials_menu.js"></script>  
<script src="pages/sound_list.js"></script>

<script src="pages/sound_tutorial.js"></script>  
<script src="pages/alphabet_tutorial.js"></script>  
<script src="pages/write_menu.js"></script>    
<script src="pages/main_menu.js"></script>   
<script src="pages/settings.js"></script>     
<script src="pages/progress.js"></script>      
<script src="pages/keyboard_practice.js"></script>      

<script src="pages/choose_avatar.js"></script>  
<script src="pages/choose_theme.js"></script>      
<script src="pages/shop_page.js"></script>      
<script src="pages/high_score.js"></script>      
<script src="pages/read_words.js"></script>     
<script src="pages/write_words.js"></script>      
<!-- <script src="pages/choose_avatar.js"></script>           -->


<script src="js/script.js"></script>      
<script src="js/question.js"></script>  
<script src="js/canvas.js"></script>      

<script>
var quiz={}
//quiz.duration=300;
var game_timer;
var user={}
var game_data={};
var session={}
var lol={}; 

var app_name="alif"
var storage_name=app_name //where we store on local storage

var game_name="alif-laam" //the main app is ALIF, and the game name is the different individual games
//var game_name="write5"
//var game_name="read5"



//create-assign a key for each user, based on a hash for the current timestamp
checked_assigned_user_key=get_local_strorage(storage_name,"assigned_user_key")
if (checked_assigned_user_key!=null)  assigned_user_key=checked_assigned_user_key
else {
    assigned_user_key=(+new Date).toString(36);
    set_local_strorage(storage_name,"assigned_user_key",assigned_user_key)
}

    
//create a session ID based on the hash of the timestamp
var session={} //what is happending during this session
assigned_session_key=(+new Date).toString(36);
session.key=assigned_session_key
session.user_key=assigned_user_key
session.app=app_name
session.game=game_name
session.items=[]


//var settings={}
//var user={}
var settings=get_local_strorage(storage_name,"settings")
if (settings==null || settings==undefined) var settings={}
if (settings.sound_on==null || settings.sound_on==undefined) settings.sound_on=true
if (settings.quiz_dur_min==null || settings.quiz_dur_min==undefined) settings.quiz_dur_min=5
if (settings.streak_dur_min==null || settings.streak_dur_min==undefined) settings.streak_dur_min=10    


var user=get_local_strorage(storage_name,"user")
if (user==null || user==undefined) var user={}
if (user.available_avatars==null || user.available_avatars==undefined) user.available_avatars=[]
if (user.avatar==null || user.avatar==undefined) user.avatar="user.png"
if (user.username==null || user.username==undefined) user.username="guest"
if (user.email==null || user.email==undefined) user.email=""
if (user.email_verified==null || user.email_verified==undefined) user.email_verified=false
if (user.badges==null || user.badges==undefined) user.badges=[]
if (user.n_hints==null || user.n_hints==undefined) user.n_hints=0    


var daily_score=get_local_strorage(storage_name,"daily_score")
if (daily_score==null || daily_score==undefined) var daily_score={}

//user.available_avatars.push("user.png")


var progress_history=get_local_strorage(storage_name,"progress_history")
if (progress_history==null || progress_history==undefined) progress_history=[]

var n_coins=get_local_strorage(storage_name,"n_coins")
if (n_coins==null || n_coins==undefined) n_coins=0

function update_coins(){
    set_local_strorage(storage_name,"n_coins",n_coins)
}

function update_user(){
    set_local_strorage(storage_name,"user",user)
}

function update_settings(){
    set_local_strorage(storage_name,"settings",settings)
}


//just to reset the progress history
// progress_history=[]
// set_local_strorage(storage_name,"progress_history",progress_history)

var streak={}


var streak=get_local_strorage(storage_name,"streak")
if (streak==null || streak==undefined) streak={}
if (streak.days==null || streak.days==undefined) streak.days={}


function update_streak(val){
	date_str=new Date().toLocaleDateString('en-GB')
	cur_streak_val=streak[date_str]
	if (cur_streak_val==null || cur_streak_val==undefined) cur_streak_val=0
	streak[date_str]=cur_streak_val+val
	set_local_strorage(storage_name,"streak",streak)
	return streak[date_str]
}

function get_nday_streak(){
    //date_str=new Date().toLocaleDateString('en-GB')
    //cur_date=date_str=new Date()
    nday_streak=0
    date_str=new Date().toLocaleDateString('en-GB')
    if (streak.days[date_str]==true) nday_streak=1
    for (var i=1;i<10000;i++){
        day_before= new Date(Date.now() - i*86400000); 
        day_before_str=day_before.toLocaleDateString('en-GB')
        check_streak_day_before=streak.days[day_before_str]
        if (check_streak_day_before==true) nday_streak+=1
        else break
        console.log(day_before_str, streak[day_before_str])
    }
    return nday_streak
    // cur_streak_val=streak[date_str]
    // if (cur_streak_val==null || cur_streak_val==undefined) cur_streak_val=0
    // streak[date_str]=cur_streak_val+val
    // set_local_strorage(storage_name,"streak",streak)
    // return streak[date_str]
}


function deploy_modal_profile(){
	$$("profile_username").value=user.username
	$$("profile_email").value=user.email
	avatar_list_div=$$("avatar_list")
	avatar_list_div.innerHTML=""
	for (const av_fname of user.available_avatars){
		console.log(av_fname)
		src=asset(av_fname).id
		cur_av_img=img(src,onload=null,id=av_fname)
		cur_av_img.height=50
		avatar_list_div.appendChild(cur_av_img)
		cur_av_img.className="av_img"
		cur_av_img.onclick=select_avatar
		if (av_fname==user.avatar) cur_av_img.classList.add("selected");

		//console.log(asset(item))
	}
	$('#profile_modal').modal('show');
}

function select_avatar(evt){
	trg=evt.currentTarget
	document.querySelector(".selected").classList.remove("selected"); //unselecting the previously selected
	trg.classList.add("selected");
	user.avatar=trg.id
}

function modal_update_profile(){
	user.username=$$("profile_username").value
	user.email=$$("profile_email").value
	update_user()
	alert("Updated Profile!")
	go2menu()
	$('.modal').modal('hide');	
}

function modal_go2shop(){
	$('.modal').modal('hide');
	go_deploy(page_nav.shop_page) 
}

function verify_email(){
	//sending the email to server
	$$("email_status").innerHTML="An email has been sent to this email address, please check your email inbox."
}

// SCALING OPTIONS
// scaling can have values as follows with full being the default
// "fit"    sets canvas and stage to dimensions and scales to fit inside window size
// "outside"    sets canvas and stage to dimensions and scales to fit outside window size
// "full"    sets stage to window size with no scaling
// "tagID"    add canvas to HTML tag of ID - set to dimensions if provided - no scaling

var scaling = "fit"; // this will resize to fit inside the screen dimensions
var width = 600;
var height = 800;
var color = light;
var outerColor = darker;
    
//var pages
//var after_game

function init(){
//    text_fname="../txt/arabic_data.json"
//    fetch(text_fname)
//      .then(function(res){ return res.json(); })
//      .then(function(data){
//        game_data=data
//        console.log(data)
//        
//        //assets.json_loaded=true;
//        //check_assets_loaded()
//      })       
}

//for createjs applications
function remove_el(el){
    if (el==undefined ||el==null) return
    el.parent.removeChild(el)
}


function go_deploy(page_obj, direction="right"){
	page_obj.deploy() //must have a deploy function
	pages.go(page_obj, direction);
}

function go2menu(){
    go_deploy(page_nav.main_menu)
}

function submit_feedback(){
    feedback_obj=get_vals("feedback")
    feedback_obj.app=app_name
    console.log(feedback_obj)
    link="../get_message.py"
    post_data(link,feedback_obj,function(obj1){
    	console.log(obj1)
    })     

}



all_letter_ids=["alif", "hamzah", "alif_hamzah", "alif_hamzah_maksoorah", "alif_maddah", "baa2", "taa2", "thaa2", "jeem", "7aa2", "khaa2", "daal", "dhaal", "raa2", "zaay", "seen", "sheen", "ssaad", "ddaad", "ttaa2", "dhaa2", "3ayn", "ghayn", "faa2", "qaaf", "kaaf", "laam", "meem", "noon", "haa2", "waaw", "yaa2", "taa2_marbootah", "hamzah_waaw", "hamzah_nabra", "alif_layyenah", "laam_alif"]    
    
sound_ids_json_str='["aa","i","aa_layyenah","hamzah_2","hamzah_a","2a","2","2u","2i","2aa","2aa","b","ba","bb","bba","bi","bu","t","ta","ti","tta","tu","th","tha","thi","ththa","thu","j","ja","ji","jja","ju","7","77a","7a","7i","7u","kh","kha","khi","khkhi","khu","d","da","dd","dda","di","du","dh","dha","dhdha","dhi","dhu","r","ra","ri","rr","rra","ru","z","za","zu","zza","s","sa","si","su","sh","sha","shi","shsh","shu","ssaad_s","ssaad_ss","ssaad_sa","ssaad_si","ssaad_su","ddaad_d","ddaad_dda","ddaad_da","ddaad_di","ddaad_du","ttaa2_t","ttaa2_tta","ttaa2_ta","ttaa2_ti","dhaa2_dh","dhaa2_dhdh","dhaa2_dha","dhaa2_dhi","dhaa2_dhu","3","33a","3a","3i","3u","gh","gha","ghgha","ghi","ghu","f","fa","ffa","fi","fu","q","qa","qi","qqa","qqi","qu","k","ka","ki","kka","ku","l","la","li","ll","lla","lu","m","ma","mi","mm","mu","n","na","ni","nn","nna","nu","h","ha","hi","hu","oo","w","wa","wi","wwa","ee","y","ya","yu","yy","yya","yyi","h","waaw_2","waaw_2a","yaa2_2","yaa2_2i"]'
all_sound_ids=JSON.parse(sound_ids_json_str)
//console.log(all_letter_ids)
//console.log(all_sound_ids)

avatars=[{fname:"001-girl-10.png",price:10},{fname:"003-boy-20.png",price:10},{fname:"002-girl-9.png",price:100},
{fname:"010-boy-19.png",price:100},{fname:"004-girl-8.png",price:200},{fname:"012-boy-17.png",price:200},
{fname:"008-girl-6.png",price:300},{fname:"011-boy-18.png",price:300},{fname:"004-princess.png",price:400},
{fname:"005-prince.png",price:400},{fname:"003-queen.png",price:500},{fname:"001-king.png",price:500},
{fname:"011-joker.png",price:600},{fname:"012-knight.png",price:700},{fname:"009-ninja.png",price:800}
]

animal_fnames=["animal.png", "ant.png", "bat.png", "bear.png", "bee.png", "beetle.png", "bird.png", "bull.png", "camel.png", "cat.png", "cheetah.png", "chick.png", "chicken.png", "chimpanzee.png", "cockroach.png", "cow.png", "crocodile.png", "deer.png", "dog.png", "dolphin.png", "donkey.png", "duck.png", "eagle.png", "elephant.png", "falcon.png", "fish.png", "fly.png", "fox.png", "frog.png", "giraffe.png", "goat.png", "goose.png", "gorilla.png", "grasshopper.png", "hamster.png", "hedgehog.png", "hippo.png", "horse.png", "insect.png", "kangaroo.png", "koala.png", "lion.png", "lizzard.png", "llama.png", "monkey.png", "mosquito.png", "mouse.png", "octopus.png", "owl.png", "panda.png", "parrot.png", "peacock.png", "penguin.png", "pig.png", "pigeon.png", "rabbit.png", "raccoon.png", "rhino.png", "robin.png", "rooster.png", "scorpion.png", "shark.png", "sheep.png", "skunk.png", "sloth.png", "snail.png", "snake.png", "spider.png", "squirrel.png", "tiger.png", "turkey.png", "turtle.png", "wasp.png", "whale.png", "wolf.png", "worm.png", "zebra.png"] 

//==================== Adding sounds to assets ===================    
//var assets = [{text:"game_data", src:"arabic_data.json"}]
var assets = []
// cur_asset={id:"youtube.png", src:"img/youtube.png"}
// cur_asset={id:"coin.png", src:"img/coin.png"}
assets.push({id:"user.png", src:"img/user.png"})
assets.push({id:"youtube.png", src:"img/youtube.png"})
assets.push({id:"coin.png", src:"img/coin.png"})
assets.push({id:"idea.png", src:"img/idea.png"})
assets.push({id:"trophy.png", src:"img/trophy.png"})
assets.push({id:"clock.png", src:"img/clock.png"})
assets.push({id:"rocket.png", src:"img/rocket.png"})
assets.push({id:"star.png", src:"img/star.png"})
assets.push({id:"shopping.png", src:"img/shopping.png"})
assets.push({id:"settings.png", src:"img/settings.png"})
assets.push({id:"question.png", src:"img/question.png"})
assets.push({id:"feedback.png", src:"img/feedback.png"})

for (const avatar_obj of avatars){ //adding letter name sounds to assets
    avatars_dir="img/avatars/"
    fpath=avatars_dir+avatar_obj.fname
    cur_asset={id:avatar_obj.fname, src:fpath}
    assets.push(cur_asset)
} 

for (const an_fname of animal_fnames){ //adding letter name sounds to assets
    animals_dir="img/animals/"
    fpath=animals_dir+an_fname
    cur_asset={id:an_fname, src:fpath}
    assets.push(cur_asset)
} 

for (const let_id of all_letter_ids){ //adding letter name sounds to assets
    letter_name_sounds_dir="audio/game/alphabet/"
    fpath=letter_name_sounds_dir+let_id+".mp3"
    cur_asset={id:let_id, maxNum:1, src:fpath}
    assets.push(cur_asset)
} 
for (const snd_id of all_sound_ids){ //adding actual letter sounds to assets
    letter_sounds_dir="audio/letter-sounds/"
    fpath=letter_sounds_dir+snd_id+".mp3"
    cur_asset={id:snd_id, maxNum:1, src:fpath}
    assets.push(cur_asset)
} 
//cur_asset={id:"youtube.png", maxNum:1, src:"img/youtube.png"}


// if (game_name=="alpha5"){
//     for (const let_id of all_letter_ids){ //adding letter name sounds to assets
//         letter_name_sounds_dir="audio/game/alphabet/"
//         fpath=letter_name_sounds_dir+let_id+".mp3"
//         cur_asset={id:let_id, maxNum:1, src:fpath}
//         assets.push(cur_asset)
//     }    
// }

// if (game_name=="read5"){
//     for (const snd_id of all_sound_ids){ //adding actual letter sounds to assets
//         letter_sounds_dir="audio/letter-sounds/"
//         fpath=letter_sounds_dir+snd_id+".mp3"
//         cur_asset={id:snd_id, maxNum:1, src:fpath}
//         assets.push(cur_asset)
//     }      
// }    
  
//for (var tut_i=1;tut_i<=10;tut_i++){ //adding tutorials audio to assets
//    tut_audio_id="tutorial"+tut_i
//    tutorial_sounds_dir="../audio/alpha-tutorial/"
//    fpath=tutorial_sounds_dir+tut_audio_id+".mp3"
//    cur_asset={id:tut_audio_id, maxNum:1, src:fpath}
//    assets.push(cur_asset)
//}    

var page_nav={}    //global variable for navigating pages
var theme ={}

var quiz={}
var question={}

theme.colors=["#05668D","#427AA1","#EBF2FA","#679436","#A5BE00"]
theme.bg1="#EBF2FA"
theme.bg2="#EBF2FA"
theme.font="reuben" //"verdana"
path=''
STYLE = {font:theme.font, size:50};

var progress = new ProgressBar({foregroundColor:orange, backgroundColor:purple}).sca(2);
    
// as of ZIM 5.5.0 you do not need to put zim before ZIM functions and classes
var frame = new Frame(scaling, width, height, color, outerColor,assets, path,progress);
frame.on("ready", function() {
    zog("ready from ZIM Frame"); // logs in console (F12 - choose console)

    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;
    //console.log(game_data)
    color1=orange
    color2=green 
    

    main_title="ALIF LAAM"
    main_subtitle="Arabic Learning is Fun"
    guide_text="Read and Write in Arabic"
        // color1=orange
        // color2=green

    // if (game_name=="alpha5"){
    //     main_title="Alpha5"
    //     main_subtitle="Learn Arabic Alphabet"
    //     guide_text="View All Alphabet Letters"
    //     color1=orange
    //     color2=green
    // }

    // if (game_name=="read5"){
    //     main_title="Read5"
    //     main_subtitle="Read Arabic letters and words"
    //     guide_text="Sounds of Arabic Letters"
    //     color1=blue
    //     color2=orange        
    // }    

    // if (game_name=="write5"){
    //     main_title="Write5"
    //     main_subtitle="Learn Handwriting in Arabic"
    //     guide_text="View All Alphabet Letters"
    //     color1=green
    //     color2=blue         
    // }    
    
    // function deploy_game_generic(game_type){

    // }

    //The loading page ///////////
    //var loading = new Page(stageW, stageH, blue, green);
    //backgroundColor=theme.colors[2]
    var loading = new Page(stageW, stageH, theme.bg1,theme.bg2);
    page_nav.loading=loading
    //new Circle(200,dark).center(splash);
    new Label({color:purple, text:"Loading", font:theme.font, size:100,variant:true}).center(loading)
    
    //The splash page ///////////
    var splash = new Page(stageW, stageH, theme.bg1, theme.bg2);
    //new Circle(200,dark).center(splash);
    //new Label("Alpha5").pos(0,100,CENTER,TOP,splash);
    new Label({color:red, text:main_title, font:theme.font, size:60,variant:true}).pos(0,100,CENTER,TOP,splash);
    new Label({color:purple, text:main_subtitle, font:theme.font, size:30,variant:true}).pos(0,-100,CENTER,CENTER,splash);
    new Label({color:purple, text:guide_text, font:theme.font, size:30,variant:true}).pos(0,0,CENTER,CENTER,splash);
    //go_label=Label({color:purple, text:"guide_text", font:theme.font, size:30,variant:true})
    splash.go = new Button({width:140,height:140,backgroundColor:purple,rollBackgroundColor:orange,label:"GO",corner:70})
    .pos(0,150,CENTER,BOTTOM,splash)    


    // img4=asset("youtube.png").clone().center(splash);
    // img5=asset("youtube.png").clone().pos(stageW*0.25,-stageH*0.2,CENTER,CENTER,splash);
    // stage.update();
       
    // asset("youtube.png").center(splash);
    // asset("youtube.png").clone().loc(100,100);
    // stage.update();

    splash.backing;
    
    list_str_color1=[["A","red"],["L","green"],["I","blue"],["F","magenta"]]
    title_text=multicolor_txt(0,0,list_str_color1,ltr=true)     
    test_zimify=zimify(title_text)
    test_zimify.pos(0,20,CENTER,BOTTOM,splash)
    zog(test_zimify)
    
//    var timer = new Timer({
//       time:60,
//       borderColor:dark,
//       isometric:"left" // isometric for left side of board
//    }).center(splash)

    
    //The tutorials page /////////
    var tutorial = makeTutorial(stage);
    var tutorials_menu = makeTutorialsMenu(stage);
    var alphabet_tutorial = makeAlphabetTutorial(stage);
    //The Sound list page ///
    var sound_tutorial = makeSoundTutorial(stage);  

    var keyboard_practice = makeKeyboardPractice(stage)
    page_nav.keyboard_practice=keyboard_practice
    //The hand writing page ///
    var writing_menu = makeWritingMenu(stage);
    page_nav.handwriting_practice=writing_menu //update page names and make them consistent

    var writing_page = makeWriting(stage);
    

    
    //The game page ///
    var game = makeGame(stage);
    page_nav.game=game
    

    
    
    //The alphabet list page ///
    var alphabet = makeAlphabet(stage);
    page_nav.alphabet=alphabet
    //var alphabet2 =new Page(stageW, stageH, orange, blue);
    
    //The Sound list page ///
    var sound_page = makeSoundPage(stage);
 


    var read_words_page =makeReadWords(stage)
    var write_words_page =makeWriteWords(stage)
    
    //========= Menu Navigation =========
    var main_menu_page = makeMainMenu(stage) 
    page_nav.main_menu=main_menu_page

    var profile_page=makeProfilePage(stage); 
    page_nav.profile_page=profile_page

    var settings_page = makeSettings(stage) 
    page_nav.settings=settings_page
    
    var progress_dashboard = makeProgressDashboard(stage) 
    page_nav.progress_dashboard=progress_dashboard

    var avatar_page = makeChooseAvatar(stage)
    page_nav.avatar_page=avatar_page

    var theme_page = makeChooseTheme(stage)
    page_nav.theme_page=theme_page

    var shop_page = makeShopPage(stage)
    page_nav.shop_page=shop_page

    var high_score_page = makeHighScorePage(stage)
    page_nav.high_score_page=high_score_page
    
    
    //The menu page
    // var menu = new Page(stageW, stageH, orange, blue);
    // //new Circle(200,dark).center(splash);
    // title_label=new Label({color:purple, text:main_title+"\nMain Menu", size:50, variant:true, align:CENTER}).pos(0,100,CENTER,TOP,menu);
    // go2game_label=new Label({color:yellow, text:"Start\nGame", size:60, align:CENTER})
    // menu.go2game = new Button({width:200,height:200,backgroundColor:purple,rollBackgroundColor:orange,label:go2game_label,corner:100})
    // .pos(0,0,CENTER,CENTER,menu)   
    // go2tutorial_label=new Label({color:yellow, text:"Tutorial", size:30, variant:true, align:CENTER})
    // menu.go2tutorial = new Button({width:140,height:140,backgroundColor:purple,rollBackgroundColor:orange,label:go2tutorial_label,corner:70})
    // .pos(60,150,LEFT,BOTTOM,menu)    
    // go2pogress_label=new Label({color:yellow, text:"My\nProgress", size:30, variant:true, align:CENTER})
    // menu.go2pogress = new Button({width:140,height:140,backgroundColor:purple,rollBackgroundColor:orange,label:go2pogress_label,corner:70})
    // .pos(60,150,RIGHT,BOTTOM,menu)    

    // alphabet_label=new Label({color:yellow, text:guide_text, size:25, align:CENTER})
    // menu.go2guide = new Button({width:stageW*0.8,height:60,backgroundColor:blue.darken(0.5),rollBackgroundColor:orange,label:alphabet_label,corner:20})
    // .pos(0,20,CENTER,BOTTOM,menu)   

 
    //The alphabet page
//    var alphabet = new Page(stageW, stageH, orange, blue);
//    go2tutorial_label=new Label({color:yellow, text:"Tutorial", size:30, variant:true, align:CENTER})
//    alphabet.go2tutorial = new Button({width:140,height:140,backgroundColor:purple,rollBackgroundColor:orange,label:go2tutorial_label,corner:70})
//    .pos(0,150,CENTER,BOTTOM,alphabet)    
//    menu_label=new Label({color:yellow, text:"Menu >>", size:25, align:CENTER})
//    alphabet.go2menu = new Button({width:140,height:60,backgroundColor:purple,rollBackgroundColor:orange,label:menu_label,corner:20})
//    .pos(60,20,RIGHT,BOTTOM,alphabet)   

    //The game ended page
    after_game = new Page(stageW, stageH, yellow, blue);
    //new Circle(200,dark).center(splash);
    title_label=new Label({color:purple, text:"Game Ended", size:60, variant:true, align:CENTER}).pos(0,100,CENTER,TOP,after_game);
    after_game.completion_label=new Label({color:purple, text:"Completion", size:40, variant:true, align:CENTER}).pos(0,200,CENTER,TOP,after_game);
    after_game.accuracy_label=new Label({color:purple, text:"Accuracy", size:40, variant:true, align:CENTER}).pos(0,300,CENTER,TOP,after_game);
    after_game.score_label=new Label({color:purple, text:"Score", size:40, variant:true, align:CENTER}).pos(0,400,CENTER,TOP,after_game);
    after_game.score_explanation_label=new Label({color:purple, text:"Score reflects both\nhow many questions answered\nand the answer accuracy", size:30, align:CENTER}).pos(0,500,CENTER,TOP,after_game);

    menu_label=new Label({color:yellow, text:"Menu", size:25, align:CENTER})
    after_game.go2menu = new Button({width:stageW*.8,height:60,backgroundColor:purple,rollBackgroundColor:orange,label:menu_label,corner:20})
    .pos(0,20,CENTER,BOTTOM,after_game)
    .on("mousedown", go2menu)   

    //The progress dashboard page
    // var dashboard = new Page(stageW, stageH, yellow, green);
    // //new Circle(200,dark).center(splash);
    // title_label=new Label({color:purple, text:"My Progress Dashboard\n Coming Soon", size:50, variant:true, align:CENTER}).pos(0,100,CENTER,TOP,dashboard);
    // menu_label=new Label({color:yellow, text:"Menu", size:25, align:CENTER})
    // dashboard.go2menu = new Button({width:140,height:60,backgroundColor:purple,rollBackgroundColor:orange,label:menu_label,corner:20})
    // .pos(0,20,CENTER,BOTTOM,dashboard)   
    
    

    pages = new Pages([
        {page:loading, swipe:[]},
        {page:splash, swipe:[]},
        {page:tutorial, swipe:[]},
        {page:alphabet, swipe:[]},
        {page:game, swipe:[]},
        {page:after_game, swipe:[]},
        {page:progress_dashboard, swipe:[]}, 
        {page:sound_page, swipe:[]}, 
        {page:sound_tutorial, swipe:[]},
        {page:writing_page, swipe:[]}, 
        {page:writing_menu, swipe:[]},
        {page:main_menu_page, swipe:[]}, 
        {page:settings_page, swipe:[]}, 
        {page:keyboard_practice, swipe:[]},
        {page:tutorials_menu, swipe:[]},
        {page:alphabet_tutorial, swipe:[]},
        {page:profile_page, swipe:[]}, 
        {page:read_words_page, swipe:[]}, 
        {page:write_words_page, swipe:[]}, 
        {page:high_score_page, swipe:[]}, 
        {page:shop_page, swipe:[]},
    ], new Emitter({num:10, height:stageW, angle:0, vertical:true, force:{min:3, max:10}}), .7, [
        [splash, tutorial, "pixelZIM"],
        [alphabet, tutorial, "pixelZIM"],
    ]).addTo();
    

    //========== Navigation from splash to main menu
    splash.go.on("mousedown", function () {
        // pages.go(tutorial, "right"); ////// <<<<<----- for now
        console.log(main_menu_page)
        pages.go(main_menu_page, "right");
        
    });

    //============== Main Menu Navigation ===============
    main_menu_page.go2alphabet_game.on("mousedown", function () {
        console.log("alphabet game")
        setup_quiz()
        gen_shape_questions()
        console.log("generated questions")
        quiz.type="alphabet"
        quiz.i=0
        quiz.score_multiplier=10
        cur_q_obj=quiz.questions[quiz.i]
        game.deploy_q(cur_q_obj)    
        pages.go(game, "right");    

    })

    main_menu_page.go2sound_game.on("mousedown", function () {
        console.log("sound game")
        setup_quiz()
        gen_sound_questions2()
        quiz.type="sounds"
        quiz.i=0
        quiz.score_multiplier=10
        cur_q_obj=quiz.questions[quiz.i]
        game.deploy_q(cur_q_obj)   
        pages.go(game, "right");    
    })

    // main_menu_page.go2handwriting_game.on("mousedown", function () {
    //     console.log("Handwriting game")
    //     pages.go(writing_menu, "up");
    // })

    // main_menu_page.go2typing_game.on("mousedown", function () {
    //     console.log("Typing game")
    //     pages.go(keyboard_practice, "up");
        
    // })
    
    main_menu_page.go2read_words_game.on("mousedown", function () {
    	
    	pages.go(read_words_page, "up");
        read_words_page.deploy()
        console.log("Read words game")
    })

    main_menu_page.go2write_words_game.on("mousedown", function () {
        console.log("Write Words game")
        write_words_page.deploy()
        pages.go(write_words_page, "up");
    })

    // main_menu_page.go2settings.on("mousedown", function () {
    //     console.log("Go to settings")
    //     pages.go(settings_page, "up");
    // })

    // main_menu_page.go2progress.on("mousedown", function () {
    //     console.log("Go to Progress Dashboard")
    //     progress_dashboard.display_progress_dashboard()
    //     pages.go(progress_dashboard, "up");
    // })

    main_menu_page.go2tutorials.on("mousedown", function () {
        console.log("Go to Tutorials")
        pages.go(tutorials_menu, "up");
    })

    // main_menu_page.go2profile.on("mousedown", function () {
    //     console.log("Go to Profile")
    //     pages.go(profile_page, "up");
    // })
    
    //============== Profile Page Navigation ===============
    // profile_page.go2menu.on("mousedown", function () {
    //     console.log("Go to Main Menu")
    //     pages.go(main_menu_page, "up");
    // })



    //============== Tutorials Menu Navigation ===============
    tutorials_menu.go2menu.on("mousedown", function () {
        console.log("Go to Main Menu")
        pages.go(main_menu_page, "up");
    })

    tutorials_menu.go2alphabet_tutorial.on("mousedown", function () {
        console.log("Go to Alphabet Tutorial")
        pages.go(alphabet_tutorial, "up");
    })

    tutorials_menu.go2sound_tutorial.on("mousedown", function () {
        console.log("Go to Sound Tutorial")
        pages.go(sound_tutorial, "up");
    })

    //============== Alphabet Tutorials Navigation ===============
    alphabet_tutorial.go2menu.on("mousedown", function () {
        console.log("Go to Tutorials Menu")
        pages.go(tutorials_menu, "up");
    })
    alphabet_tutorial.go2alphabet.on("mousedown", function () {
        console.log("Go to Alphabet")
        alphabet.deploy_list()
        pages.go(alphabet, "up");
    })


    //============== Alphabet Page Navigation ===============
    alphabet.go2tutorial.on("mousedown", function () {
        pages.go(tutorial, "up");
    });    
    alphabet.go2menu.on("mousedown", function () {
        pages.go(tutorials_menu, "right");
    });    

    //============== Sound Tutorials Navigation ===============
    sound_tutorial.go2menu.on("mousedown", function () {
        pages.go(tutorials_menu, "right");
    });      
    
    sound_tutorial.go2sound_list.on("mousedown", function () {
        sound_page.deploy_list()
        pages.go(sound_page, "down");
        //pages.go(sound_page, "down"); ////////////////////////////////
    }); 
    sound_page.go2tutorial.on("mousedown", function () {
        pages.go(sound_tutorial, "up");
    });    
    sound_page.go2menu.on("mousedown", function () {
        pages.go(tutorials_menu, "right");
    });   


    //go2menu,  go2alphabet_tutorial, go2sound_tutorial






    tutorial.go2alphabet.on("mousedown", function () {
        pages.go(alphabet, "down");
        //pages.go(sound_page, "down"); ////////////////////////////////
        
    });    
    
    
//    writing_page.go2menu.on("mousedown", function () {
//        pages.go(menu, "right");
//    });    
    
    
    
    tutorial.go2menu.on("mousedown", function () {
        pages.go(main_menu_page, "right");
    });    
    
    
    // menu.go2guide.on("mousedown", function () {
    //     if (game_name=="alpha5" ) pages.go(alphabet, "down");
    //     else if (game_name=="read5" ) pages.go(sound_page, "right");
    //     else if (game_name=="write5" ) pages.go(alphabet, "right");        
        
    // });    
    
    // menu.go2tutorial.on("mousedown", function () {
    //     pages.go(tutorial, "left");
    // });  
    // menu.go2pogress.on("mousedown", function () {
    //     pages.go(dashboard, "down");
    // });      

    game.go2menu.on("mousedown", function () {
        clearInterval(game_timer)
        pages.go(main_menu_page, "left");
        //game_ended()
    });      
    

    game.go2after_game.on("mousedown", function () {
        pages.go(after_game, "down");
    });      

    // after_game.go2menu.on("mousedown", function () {
    //     pages.go(main_menu_page, "down");
    // });   
    
   
    
    //transition from writing menu to start
    //write_letter_shapes, write_letters, write_words,  page.prepare
//    writing_menu.go2menu.on("mousedown", function () {
//        pages.go(menu, "up");
//    });     
    
    writing_page.go2menu.on("mousedown", function () {
        //pages.go(writing_menu, "up");
        pages.go(main_menu_page, "up");
    });   
    
    writing_menu.write_letters.on("mousedown", function () {
        writing_menu.prepare("letters")
        writing_page.i=0
        writing_page.deploy()
        pages.go(writing_page, "up");
    });  
    writing_menu.write_letter_shapes.on("mousedown", function () {
        writing_menu.prepare("shapes")
        writing_page.i=0
        writing_page.deploy()
        pages.go(writing_page, "up");
    });  
    writing_menu.write_words.on("mousedown", function () {
        writing_menu.prepare("words")
        writing_page.i=0
        writing_page.deploy()
        pages.go(writing_page, "up");
    });      
     


    settings_page.go2menu.on("mousedown", function () {
    	console.log("Go to menu")
    	pages.go(main_menu_page, "up");
    })

    progress_dashboard.go2menu.on("mousedown", function () {

        pages.go(main_menu_page, "up");
    });   

    keyboard_practice.go2menu.on("mousedown", function () {
        pages.go(main_menu_page, "up");
    });   

    

    
    
    function setup_quiz(){
    	quiz={}
        game.timer.text="Timer"
        game_timer = setInterval(myTimer, 1000);
        quiz.duration=300
        if (settings.quiz_dur_min!=null) quiz.duration=settings.quiz_dur_min*60;
        //if (settings.duration!=null) quiz.duration=settings.duration*60;
        quiz.remaining_time=quiz.duration
        function myTimer() {
            quiz.remaining_time-=1
            n_seconds=quiz.remaining_time%60
            n_minutes=(quiz.remaining_time-n_seconds)/60
            n_minutes_str=""+n_minutes
            n_seconds_str=""+n_seconds
            if (n_seconds_str.length==1) n_seconds_str="0"+n_seconds_str
            timer_str=n_minutes_str+":"+n_seconds_str
            game.timer.text=timer_str
            if (quiz.remaining_time<=0) {
                pages.go(after_game, "right");
                console.log("where is this?")
                game_ended2() //question.js
//                accuracy_100=Math.round(100*quiz.accuracy)
//                after_game.accuracy_label.text=""+accuracy_100+"%"
                clearInterval(game_timer)
            } 
        }    
        
        //Setup accuracy tracking
        quiz.accuracy=0
        quiz.n_attempts=0
        quiz.n_correct=0
        accuracy_100=Math.round(100*quiz.accuracy)
        game.accuracy.text=""+accuracy_100+"%"

    }
    
    
    //transition from menu to game
//     menu.go2game.on("mousedown", function () {
//         //zog("Hello there")
//         pages.go(game, "right");
// //        if (game_name=="alpha5" ) pages.go(game, "down");
// //        else if (game_name=="read5" ) pages.go(sound_page, "right");
// //        else if (game_name=="write5" ) pages.go(alphabet, "right"); 
        
//         //start a timer
//         //quiz.duration=60
//         game.timer.text="Timer"
//         game_timer = setInterval(myTimer, 1000);
//         quiz.remaining_time=quiz.duration
//         function myTimer() {
//             quiz.remaining_time-=1
//             n_seconds=quiz.remaining_time%60
//             n_minutes=(quiz.remaining_time-n_seconds)/60
//             n_minutes_str=""+n_minutes
//             n_seconds_str=""+n_seconds
//             if (n_seconds_str.length==1) n_seconds_str="0"+n_seconds_str
//             timer_str=n_minutes_str+":"+n_seconds_str
//             game.timer.text=timer_str
//             if (quiz.remaining_time<=0) {
//                 pages.go(after_game, "right");
//                 game_ended()
// //                accuracy_100=Math.round(100*quiz.accuracy)
// //                after_game.accuracy_label.text=""+accuracy_100+"%"
//                 clearInterval(game_timer)
//             } 
//         }    
        
//         //Setup accuracy tracking
//         quiz.accuracy=0
//         quiz.n_attempts=0
//         quiz.n_correct=0
//         accuracy_100=Math.round(100*quiz.accuracy)
//         game.accuracy.text=""+accuracy_100+"%"
        
//         if (game_name=="alpha5" ) gen_shape_questions()
//         else if (game_name=="read5" ) gen_sound_questions()
//         else if (game_name=="write5" ) gen_shape_questions()
        
        
        
//         //gen_sound_questions()
//         console.log(quiz)
//         //starting game
//         //quiz.questions=quiz.questions.slice(0,5) //till we put a timer
//         quiz.i=0
//         cur_q_obj=quiz.questions[quiz.i]
//         game.deploy_q(cur_q_obj)
        
        
//     }); 


    text_fname="txt/arabic_data.json"
    fetch(text_fname)
      .then(function(res){ return res.json(); })
      .then(function(data){
        game_data=data
        console.log(data)
        pages.go(splash, "right");

        // gen_shape_questions()
        // console.log(quiz)   
        // alphabet.deploy_list()
        // sound_page.deploy_list()
        
        // gen_sound_questions()
        //assets.json_loaded=true;
        //check_assets_loaded()
      })       

    animal_list_fname="txt/animal-list.txt"
    fetch(animal_list_fname)
      .then(function(res){ return res.text(); })
      .then(function(data){
        console.log(data.split("\r\n"))
      }) 

    tutorial_fname="txt/tutorial.txt"
    fetch(tutorial_fname)
      .then(function(res){ return res.text(); })
      .then(function(data){
        console.log(data.split("\r\n"))
        joined=data.split("\r\n").join("<br>")
        joined=joined.split("><br>").join(">")
        $$("tutorial_div").innerHTML=joined
        //$('#tutorial_modal').modal('show');   
        //tutorial_modal
        //
      }) 

    
})
    </script>
<meta name="viewport" content="width=device-width, user-scalable=no" />

</head>

<body onload="init()">
<!-- canvas with id="myCanvas" is made by zim Frame -->
<iframe id="youtube1" width="560" height="315" src="https://www.youtube.com/embed/DddX_IdZxOg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen hidden></iframe>

<!-- The Modal -->
  <div class="modal fade" id="feedback_modal">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Send Feedback</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          Tell us any questions, suggestions, or problems.
          <input type="text" id="msg_from_name" name="msg_from_name" class="feedback form-control form-control mb-1" placeholder="your name">
          <input type="text" id="msg_from_email" name="msg_from_email" class="feedback form-control form-control mb-1" placeholder="your email">
          <textarea class="feedback form-control mb-1" rows="5" id="msg_content" name="msg_content" placeholder="your feedback"></textarea>
          <button type="button" class="btn btn-primary btn-block" onclick="submit_feedback()">Submit Feedback</button>
        </div>

 
        

        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>

<!-- Tutorial Modal -->
<div class="modal fade" id="tutorial_modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Arabic Letters and Sounds</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div id="tutorial_div" class="modal-body">

        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<!-- End of Tutorial Modal -->

<!-- Profile Modal -->
<div class="modal fade" id="profile_modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Profile</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div id="profile_div" class="modal-body">
        	  <div class="form-group">
			    <label for="username">Choose user name:</label>
			    <input type="email" class="profile form-control" placeholder="Enter username" id="profile_username" name="username">
			  </div>
			  <div class="form-group">
			    <label for="email">Email address:</label>
			    <input type="email" class="profile form-control" placeholder="Enter email" id="profile_email" name="email">
			    <div id="email_verification">
			    	<div id="email_status">Email Not Verified!</div>
			    	<button class="btn btn-primary" id="btn_email_verify" onclick="verify_email()">Verify Email</button>
			    </div>
			  </div>
			  <h3>Choose your avatar</h3>
			  <p>Get more avatars from 
			  	<button class="btn btn-primary" id="btn_go2shop" onclick="modal_go2shop()">item shop</button>
			  </p>
			  <div id="avatar_list" class="m-2"></div>
			  <button class="btn btn-primary btn-block" onclick="modal_update_profile()">Update profile</button>

        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<!-- End of Profile Modal -->


<!-- About Modal -->
<div class="modal fade" id="about_modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">About</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div id="about_div" class="modal-body">
        	<p><div id="version_n">Version: 1.0</div>  <div id="version_date">July 29, 2021</div></p>
        	<p>Alif Laam is an app for Arabic Literacy: to easily read and write Arabic script. It is intended for both children and adults. Alif Laam is a part of ALIF apps (Arabic Learning is Fun), covering different aspects of learning Arabic.
        	</p>
        	<h3>Acknowledgments</h3>
        	<p>This game was developed using zimjs framework. Many thanks to the developer of this framework, Dan (Dr. Abstract) for his continuous support and for adding essential elements of the framework that are needed as part of this app, such as the Arabic keyboard.</p>
        	<p>Thanks to Salma Ghaly and Yaseen Ghaly for testing the game and providing valuable suggestions</p>

        	<p><div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div></p> 

        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<!-- End of Tutorial Modal -->


<!-- <script src="cordova.js"></script> -->
</body>
</html>
